clear all; close all; clc;

L1=imread('image3.jpg');
figure,imshow(L1);
title('OBRAZ ORYGINALNY')

% filtracja medianowa
A1 = medfilt2(L1(:,:,1), [7 7]);
figure,imshow(A1);
title('FILTRACJA')

%ROZJAŚNIENIE
A1=double(A1)/255;
rozjasnienie=A1*2.97; 
figure,imshow(rozjasnienie);
title('ROZJAŚNIENIE')

%BINARYZACJA
level= graythresh(rozjasnienie);
binaryzacja= im2bw(rozjasnienie, level);
figure,imshow(binaryzacja);
title('BINARYZACJA')
% DYLATACJA
dylatacja = bwmorph(binaryzacja,'dilate');
figure, imshow(dylatacja);
title('DYLATACJA')
% EROZJA 
erozja = bwmorph(dylatacja,'erode'); % - operacja erozji
figure, imshow(erozja) % - wyswietlenie wyniku
title('EROZJA ')
% OTWARCIE 
otwarcie = strel('disk',3);
otw = imopen(erozja,otwarcie);
figure, imshow(otw);
title('OTWARCIE') 
%ZAMKNIECIE
zamkniecie = strel('disk',6);
zamk = imclose(otw,zamkniecie);
figure, imshow(zamk), 
title('ZAMKNIĘCIE')

a1=sum(zamk(:));
rozmiar=504*700*3; 
procent=a1/rozmiar;
procent=procent*100;
disp(procent);